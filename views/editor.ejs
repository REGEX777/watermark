<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Watermark Positioning</title>
    <link rel="stylesheet" href="/css/output.css">
</head>
<body class="bg-gray-900 flex items-center justify-center min-h-screen">
    <div class="bg-gray-800 p-8 rounded-lg shadow-lg w-full max-w-4xl">
        <h1 class="text-3xl font-bold mb-6 text-center text-white">Position Your Watermark</h1>
        <div class="flex justify-center mb-6">
            <div class="relative">
                <img src="/uploads/<%= regularImage %>" alt="Regular Image" id="regularImage"
                     class="w-[800px] h-auto rounded-md">
                <img src="/uploads/<%= watermarkImage %>" alt="Watermark" id="watermarkImage"
                     class="absolute w-10 h-10 opacity-75 rounded-md transform translate-x-1/2 translate-y-1/2 top-1/2 left-1/2">
            </div>
        </div>
        <form action="/editor/export" method="post" class="space-y-4">
            <input type="hidden" name="regularImage" value="<%= regularImage %>">
            <input type="hidden" name="watermarkImage" value="<%= watermarkImage %>">
            <input type="hidden" name="position" id="watermarkPosition">
            <div class="grid grid-cols-2 gap-4 mb-6">
                <button type="button" data-position="top-left"
                        class="position-button bg-indigo-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-indigo-700">
                    Top Left
                </button>
                <button type="button" data-position="top-right"
                        class="position-button bg-indigo-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-indigo-700">
                    Top Right
                </button>
                <button type="button" data-position="bottom-left"
                        class="position-button bg-indigo-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-indigo-700">
                    Bottom Left
                </button>
                <button type="button" data-position="bottom-right"
                        class="position-button bg-indigo-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-indigo-700">
                    Bottom Right
                </button>
            </div>
            <div class="flex justify-center">
                <button type="submit"
                        class="bg-green-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-green-700">
                    Export Image
                </button>
            </div>
        </form>
    </div>
    
    <script>
        const watermarkImage = document.getElementById('watermarkImage');
        const watermarkPosition = document.getElementById('watermarkPosition');
        const positionButtons = document.querySelectorAll('.position-button');

        // should be at the center by default
        watermarkPosition.value = 'center';

        positionButtons.forEach(button => {
            button.addEventListener('click', () => {
                const position = button.getAttribute('data-position');
                watermarkPosition.value = position;

                // eeeee
                watermarkImage.classList.remove('top-1/2', 'left-1/2', 'bottom-1/2', 'right-1/2', 'translate-x-1/2', 'translate-y-1/2');
                watermarkImage.classList.remove('top-0', 'left-0', 'bottom-0', 'right-0');

                switch (position) {
                    case 'top-left':
                        watermarkImage.classList.add('top-0', 'left-0', 'm-2');
                        break;
                    case 'top-right':
                        watermarkImage.classList.add('top-0', 'right-0', 'm-2');
                        break;
                    case 'bottom-left':
                        watermarkImage.classList.add('bottom-0', 'left-0', 'm-2');
                        break;
                    case 'bottom-right':
                        watermarkImage.classList.add('bottom-0', 'right-0', 'm-2');
                        break;
                }
            });
        });
    </script>
</body>
</html>
